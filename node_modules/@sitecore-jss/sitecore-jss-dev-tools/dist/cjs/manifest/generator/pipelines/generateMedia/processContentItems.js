"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const traversal_1 = require("../../traversal");
const utils_1 = require("./utils");
exports.default = (args) => {
    const { content } = args;
    const templates = utils_1.enhanceTemplates(args.templates);
    const media = args.media ? [...args.media] : [];
    traversal_1.traverseItems(content, (item) => {
        const mediaOutput = utils_1.buildMediaOutput(item, templates);
        media.push(...mediaOutput);
    });
    return Object.assign(Object.assign({}, args), { media });
};
